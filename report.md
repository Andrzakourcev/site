## Лабораторная работа 3*

# Задание 

Сделать красиво работу с секретами. Например, поднять Hashicorp Vault (или другую секретохранилку) и сделать так, чтобы ci/cd пайплайн (или любой другой ваш сервис) ходил туда, брал секрет, использовал его не светя в логах. В Readme аргументировать почему ваш способ красивый, а также описать, почему хранение секретов в CI/CD переменных репозитория не является хорошей практикой.

# Ход выполнения

Для выполнения работы нам понадобится какой-либо проект, я взял свой старый (неоконченный, но это не так важно) тестовый проект по написанию сайта на Django. Я хочу скрыть свой SECRET_KEY, который нужен для верного функционированния сайта. В качестве секретохранилки я выбрал Hashicorp Vault. 

>  Hashicorp Vault – это хранилище секретных данных, любых. При этом данное хранилище поддерживает различные механизмы авторизации и политики доступа. Это сделано для разграничения прав к нашим данным.

# Написание пайплайна

Для начала я определил что будет две job'ы, одна для установки всего необходимого, вторая для теста запуска приложения. Можно было ещё добавить, например, job'у с линтерами, но так как код не идеален, то опустим этот момент. Или например job'у для выхода на продакшен, но я остановися на тестовом запуске.

# 1. Установка Vault

Это было неприятно, открыл виртуалку с линуксом --> зашел в браузер --> скачал google chrome --> скачал расширение впн --> зашел на сайт Hashicorp и скачал Vault.

После установки запускаем Vault командой:

'vault server -dev'

![image](https://github.com/user-attachments/assets/f46c59eb-4078-4034-9df4-1fefc8c481ad)

Получаем данное сообщение, в нем нам нужно VAULT_ADDR и Root Token. Также чтобы в последствии узнавать доступен ли vault, можно проверить что все работает командой 'vault status', если значение sealed - false, то vault активен. 

![image](https://github.com/user-attachments/assets/0c6053e3-811d-4d1c-a078-b3f155f3e878)

Далее с помощью данных команд авторизовываемся в Vault при помощи значений полученных ранее:

'export VAULT_ADDR=http://127.0.0.1:8200
export VAULT_TOKEN=<ваш_токен>'

А также записываем наш секретный ключ:

'vault kv put secret/django SECRET_KEY="<сам ключ>"'

![image](https://github.com/user-attachments/assets/3ac1d649-1f78-452b-976e-0642a03ebe02)

При этом можно посмотреть метаданные и само значение командой:

'vault kv get <ваше название секрета>'

![image](https://github.com/user-attachments/assets/8a6587bb-8c38-4908-9398-6c6887c2d51d)

Также стоит сказать, что в рамках учебной задачи запускаемся локально, поэтому адрес 127.0.0.1:8200



